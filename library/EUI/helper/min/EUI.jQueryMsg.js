/*
 * Script Compressor v1.2.0 
 
 * ---------------------------------------------------------------------------------
 * Copyright (c) 2015 http://razakitechnology.com/application
 * generator compress javascript to minimize script production
 * and GPL licenses.
 * ----------------------------------------------------------------------------------
 
 * @ Depends	:	EUI.jQueryMsg.js
 * @ Date		:	3/2/2016
 * @ Author		:	razaki development team
 * @ Email		:	jombi_par@yahoo.com
 *
 */

(function(a){a.showMessage=function(c,e){settings=a.extend({id:"sliding_message_box",position:"bottom",size:"90",backgroundColor:"rgb(143, 177, 240)",delay:1500,speed:500,fontSize:"14px",htmlBody:{imgUrl:Ext.DOM.INDEX+"/gambar/icon",title:{icon:"information.png",text:"Message Box ",id:"message-title"},content:{text:"",cssBody:"box-shadow",id:"message-body",hiddenid:""},close:{icon:"cancel.png",css:"test"}}},e);var d=" <a href='javascript:void(0);' id='clear-text' style='float:right;margin-top:10px;margin-right:10px;' title='close'> <span id='"+(settings.htmlBody.close.id?settings.htmlBody.close.id:"")+"'> <img src='"+(settings.htmlBody.imgUrl?settings.htmlBody.imgUrl:"")+"/"+(settings.htmlBody.close.icon?settings.htmlBody.close.icon:"")+"'></span></a><div style=\"border:0px solid #000;\" class='"+(settings.htmlBody.content.cssBody?settings.htmlBody.content.cssBody:"")+"' id='"+(settings.htmlBody.content.id?settings.htmlBody.content.id:"body-text")+"'> <div id='"+(settings.htmlBody.title.id?settings.htmlBody.title.id:"")+"' class='ui-widget-header' style='padding:2px 2px 2px 2px;'> <span style='border:0px solid #000;padding-left:2px;padding-top:10px;'> <img src='"+(settings.htmlBody.imgUrl?settings.htmlBody.imgUrl:"")+"/"+(settings.htmlBody.title.icon?settings.htmlBody.title.icon:"")+"'></span> <span id='text-title' style='line-height:22px;'>"+settings.htmlBody.title.text+"</span></div> <div id='"+settings.htmlBody.content.html+"' style='width:99%;height:350px;overflow:auto;'>"+(settings.htmlBody.content.text?settings.htmlBody.content.text:"")+"</div></div>";c=d;e=a("#"+settings.id);if(e.length==0){e=a("<div></div>").attr("id",settings.id);e.css({"z-index":"99999","background-color":settings.backgroundColor,"text-align":"left",position:"absolute",left:0,right:"0",width:"25%","line-height":settings.size+"px","font-size":settings.fontSize});a("body").append(e)}e.html(c);if(settings.position=="bottom"){e.css("bottom","-"+settings.size+"px");e.animate({bottom:"0"},settings.speed);c='$("#'+settings.id+'").animate({bottom:"-'+settings.size+'px"}, '+settings.speed+");";setTimeout(c,settings.delay)}else{if(settings.position=="top"){e.css("top","-"+settings.size+"px");e.animate({top:"0"},settings.speed);c='$("#'+settings.id+'").animate({top:"-'+settings.size+'px"}, '+settings.speed+");"}}a("#clear-text").click(function(){e.html("");Ext.Ajax({url:Ext.DOM.INDEX+"/ModBroadcastMsg/UpdateAll/",param:{UserId:settings.htmlBody.content.hiddenid}}).json()})}})(jQuery);Ext.DOM.ClearData=function(a){Ext.Ajax({url:Ext.DOM.INDEX+"/ModBroadcastMsg/UpdateMessage/",param:{messageid:a}}).json();getMessage()};Ext.DOM.getMessage=function(){var a={id:"message_from_top",position:"top",size:11,backgroundColor:"#ffffff",delay:3000,speed:500,fontSize:"12px",htmlBody:{imgUrl:Ext.DOM.LIBRARY+"/gambar/icon",title:{icon:"information.png",text:"Message Box ",id:"message-title"},content:{text:"Hello world",cssBody:"box-shadow",id:"message-body",html:"content-msg",hiddenid:""},close:{icon:"cancel.png",css:"test"}}};new (function(){var d="",b=[];var c=Ext.Cmp(a.htmlBody.content.html).getElementId();Ext.Ajax({url:Ext.DOM.INDEX+"/ModBroadcastMsg/PoolMessage/",param:{time:Ext.Date().getDuration()},ERROR:function(f){Ext.Util(f).proc(function(h){if(h.pesan.result==1){var g=0;for(var e in h.pesan){if(g==0){d="<p style='margin:4px 0px 4px 0px;color:blue;padding:4px 2px 4px 2px;'><b style='font-size:12px;color:red;'>"+h.pesan[e].from+",</b> says : </p>"}if(h.pesan[e].datetime!=undefined){d+="<p style='padding:4px 2px 4px 2px;margin:4px 0px 4px 0px;font-size:10px;color:#030c7b;'>[ "+h.pesan[e].datetime+" ] </p><p style='margin-top:4px;text-align:justifiy;line-height:16px;font-size:11px;'>"+h.pesan[e].message+"&nbsp;( <a href='javascript:void(0);' onclick='javascript:ClearData("+h.pesan[e].msgid+");'>Clear</a> )</p> "}g++}a.htmlBody.content.text=d;a.htmlBody.content.hiddenid=0;if(g>0){$.showMessage("",a)}}else{if(c!=null){c.innerHTML=""}}})}}).post()});return false};(function(b,a){a.DOM.CallReminder=function(){a.Ajax({url:a.DOM.INDEX+"/CallReminder/SelectReminder/",method:"POST",param:{time:0},ERROR:function(c){a.Util(c).proc(function(d){if(d.count>0){console.log(d);var f=b(this).attr("href");var e='<a href="javascript:void(0);" id="reminderId"onclick="$(\'#main_content\').load(\'dta_contact_detail.php?customerid='+d.CustomerId+"&campaignid="+d.CampaignId+"');\" >"+d.CustomerName+"</a>";var g='<div class="notice"><div class="notice-body"><img src="gambar/info.png" alt="" /><h3>Reminder Call For : <br>'+e+"</h3><p><span>With Status  : "+data.status+'</span></p></div><div class="notice-bottom"></div></div>';b(g).purr({usingTransparentPNG:true,isSticky:true});a.Ajax({url:a.DOM.INDEX+"/CallReminder/UpdateReminder/",method:"POST",param:{CustomerId:data.customer,CallLaterDate:d.tryagain}}).json();return false}})}}).post()}})($,Ext);var ControlWind=window.setInterval("Ext.DOM.getMessage()",8000);
