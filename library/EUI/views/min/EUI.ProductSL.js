/*
 * Script Compressor v1.2.0 
 
 * ---------------------------------------------------------------------------------
 * Copyright (c) 2015 http://razakitechnology.com/application
 * generator compress javascript to minimize script production
 * and GPL licenses.
 * ----------------------------------------------------------------------------------
 
 * @ Depends	:	EUI.ProductSL.js
 * @ Date		:	2/15/2016
 * @ Author		:	razaki development team
 * @ Email		:	jombi_par@yahoo.com
 *
 */

var getCallPremi=function(a){if(Ext.Cmp("ProductId").empty()){Ext.Msg("Product ID is empty ").Error()}else{if(Ext.Cmp("InsuredPlanType").empty()){Ext.Msg("Plan Type is empty ").Error()}else{if(Ext.Cmp("InsuredPayMode").empty()){Ext.Msg("Paymode is empty ").Error()}else{if(Ext.Cmp("InsuredDOB").empty()){Ext.Msg("DOB is empty ").Error()}else{Ext.Ajax({url:window.opener.Ext.DOM.INDEX+"/ProductForm/Premi/",method:"GET",param:{ProductId:Ext.Cmp("ProductId").getValue(),GroupPremi:Ext.Cmp("InsuredGroupPremi").getValue(),PlanType:Ext.Cmp("InsuredPlanType").getValue(),PaymentMode:Ext.Cmp("InsuredPayMode").getValue(),date:Ext.Cmp("InsuredDOB").getValue()},ERROR:function(b){Ext.Util(b).proc(function(c){Ext.Cmp("InsuredPremi").setValue(c.premi)})}}).post()}}}}};Ext.document().ready(function(){$("#tabs").tabs();Ext.Css("result_content_add").style({width:Ext.Layout(window).ResizeWidth(),height:Ext.Layout(window).ResizeHeight(),overflow:"auto","float":"center"});Ext.Cmp("ProductId").listener({onChange:function(a){Ext.Util(a).proc(function(b){Ext.Ajax({url:window.opener.Ext.DOM.INDEX+"/ProductForm/Plan/",method:"GET",param:{ProductId:Ext.Cmp(b.id).Encrypt(),CustomerId:Ext.Cmp("CustomerId").Encrypt()}}).load("plan_type")})}});Ext.Cmp("InsuredGroupPremi").listener({onChange:function(a){Ext.Util(a).proc(function(b){if(b.value==2){Ext.Cmp("InsuredIdentificationTypeId").setValue(Ext.Cmp("PayerIdentificationTypeId").getValue());Ext.Cmp("InsuredIdentificationNum").setValue(Ext.Cmp("PayerIdentificationNum").getValue());Ext.Cmp("InsuredGenderId").setValue(Ext.Cmp("PayerGenderId").getValue());Ext.Cmp("InsuredSalutationId").setValue(Ext.Cmp("PayerSalutationId").getValue());Ext.Cmp("InsuredFirstName").setValue(Ext.Cmp("PayerFirstName").getValue());Ext.Cmp("InsuredLastName").setValue(Ext.Cmp("PayerLastName").getValue());Ext.Cmp("InsuredDOB").setValue(Ext.Cmp("PayerDOB").getValue());Ext.Cmp("InsuredDOB").setFocus();Ext.Cmp("InsuredRelationshipTypeId").setValue(1)}else{Ext.Cmp("InsuredIdentificationTypeId").setValue("");Ext.Cmp("InsuredIdentificationNum").setValue("");Ext.Cmp("InsuredGenderId").setValue("");Ext.Cmp("InsuredSalutationId").setValue("");Ext.Cmp("InsuredFirstName").setValue("");Ext.Cmp("InsuredLastName").setValue("");Ext.Cmp("InsuredDOB").setValue("");Ext.Cmp("InsuredRelationshipTypeId").setValue("")}})}});Ext.Cmp("InsuredPlanType").listener({onClick:function(a){Ext.DOM.getCallPremi(a.target)}});Ext.Cmp("buttonExit").listener({onClick:function(a){if(Ext.Msg("Do you wan to close from this session?").Confirm()){window.close(this)}}});Ext.Cmp("buttonSave").listener({onClick:function(a){if(Ext.Msg("Do you wan to save data entry?").Confirm()){Ext.Ajax({url:window.opener.Ext.DOM.INDEX+"/ProductForm/Save/",method:"GET",param:Ext.Join([Ext.Serialize("frmDataProduct").getElement(),Ext.Serialize("frmDataPayers").getElement(),Ext.Serialize("frmInsured").getElement()]).object(),ERROR:function(b){Ext.Util(b).proc(function(c){Ext.Msg(c.PolicyId+" ---> "+c.PolicyNumber).Info();if(c.succes){Ext.Msg("Save Insured").Success()}else{Ext.Msg("Save Insured ").Failed()}})}}).post()}}});$(".date").datepicker({dateFormat:"dd-mm-yy",yearRange:"1945:2030",changeYear:true,changeMonth:true,onSelect:function(a){if(typeof(a)=="string"){if($(this).attr("id")=="InsuredDOB"){Ext.Ajax({url:window.opener.Ext.DOM.INDEX+"/ProductForm/DOB/",method:"GET",param:{date:a},ERROR:function(b){Ext.Util(b).proc(function(c){Ext.Cmp("InsuredAge").setAttribute("value",c.age);Ext.Cmp("InsuredAge").setAttribute("disabled",1)})}}).post()}}}})});Ext.document().resize(function(){Ext.Css("result_content_add").style({width:Ext.Layout(window).ResizeWidth(),height:Ext.Layout(window).ResizeHeight(),overflow:"auto","float":"center"})});
